var e=Object.assign;import{o as t,c as a,r as n,m as s,a as r,b as l,w as o,d as i,e as d,f as u,v as c,F as p,p as m,g as _,S as v,h,i as f,t as y,j as $,k as w,l as b,T as g,n as k,q as M}from"./vendor.1b44589b.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const n=new URL(e,location),s=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,r)=>{const l=new URL(e,n);if(self[t].moduleMap[l])return a(self[t].moduleMap[l]);const o=new Blob([`import * as m from '${l}';`,`${t}.moduleMap['${l}']=m;`],{type:"text/javascript"}),i=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(o),onerror(){r(new Error(`Failed to import: ${e}`)),s(i)},onload(){a(self[t].moduleMap[l]),s(i)}});document.head.appendChild(i)})),self[t].moduleMap={}}}("/random-wheel/assets/");var S={primary:"_primary_8hg3b_1",secondary:"_secondary_8hg3b_11",danger:"_danger_8hg3b_22",button:"_button_8hg3b_33",default:"_default_8hg3b_46",squared:"_squared_8hg3b_52"};const I={name:"Button",props:{appearance:{type:String,default:"primary",validator:e=>-1!==["primary","secondary","danger"].indexOf(e)},view:{type:String,default:"default",validator:e=>-1!==["default","squared"].indexOf(e)}}};(I.__cssModules={}).$style=S,I.render=function(e,r,l,o,i,d){return t(),a("button",s({class:[e.$style.button,e.$style[e.$props.appearance],e.$style[e.$props.view]]},e.$attrs),[n(e.$slots,"default")],16)};const P={name:"CloseIcon"},x={width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},L=r("path",{d:"M1 1L13 13",stroke:"currentColor"},null,-1),j=r("path",{d:"M13 1L1 13",stroke:"currentColor"},null,-1);P.render=function(e,n,s,r,l,o){return t(),a("svg",x,[L,j])};var B={backdrop:"_backdrop_1k1he_2",modal:"_modal_1k1he_14",closeButton:"_close-button_1k1he_24"};const V={name:"Modal",components:{CloseIcon:P}};(V.__cssModules={}).$style=B,V.render=function(e,s,i,d,u,c){const p=l("CloseIcon");return t(),a("div",{class:e.$style.backdrop,onClick:s[2]||(s[2]=o((t=>e.$emit("close-modal")),["self"]))},[r("div",{class:e.$style.modal},[r("div",{class:e.$style.closeButton,onClick:s[1]||(s[1]=t=>e.$emit("close-modal"))},[r(p)],2),n(e.$slots,"default")],2)],2)};var W={header:"_header_bohle_1",inner:"_inner_bohle_7"};const C={name:"Header",components:{Button:I}},D=d("Настройки");(C.__cssModules={}).$style=W,C.render=function(e,n,s,o,d,u){const c=l("Button");return t(),a("div",{class:e.$style.header},[r("div",{class:e.$style.inner},[r(c,{onClick:n[1]||(n[1]=t=>e.$emit("open-modal"))},{default:i((()=>[D])),_:1})],2)],2)};const O={name:"Link",props:{isExternalLink:{type:Boolean}},computed:{allProps(){const t={};return this.isExternalLink&&(t.target="_blank",t.rel="nofollow noopener noreferrer"),e(e({},this.$attrs),t)}}};(O.__cssModules={}).$style={},O.render=function(e,s,r,l,o,i){return t(),a("a",i.allProps,[n(e.$slots,"default")],16)};var A={footer:"_footer_wumne_1",inner:"_inner_wumne_7",icon:"_icon_wumne_13",linkWrapper:"_link-wrapper_wumne_25",mr:"_mr_wumne_30",ml:"_ml_wumne_35",link:"_link_wumne_25"};const F={name:"Footer",components:{Link:O}},U=r("img",{src:"https://avatars.githubusercontent.com/u/8355785",alt:"MissedWarrior"},null,-1);(F.__cssModules={}).$style=A,F.render=function(e,n,s,o,d,u){const c=l("Link");return t(),a("div",{class:e.$style.footer},[r("div",{class:e.$style.inner},[r("div",{class:e.$style.linkWrapper},[r("div",{class:e.$style.mr},"Made by",2),r(c,{"is-external-link":"",href:"https://github.com/missedwarrior",class:e.$style.link},{default:i((()=>[r("div",{class:e.$style.icon},[U],2),r("div",{class:e.$style.ml},"@MissedWarrior",2)])),_:1},8,["class"])],2)],2)],2)};const E=(e,t)=>{try{return e?JSON.parse(e):[]}catch(a){return(e=>{localStorage.removeItem(e)})(t),alert("Не удалось распознать сохранённые данные. Хранилище было очищено"),[]}};var T={input:"_input_1jd4o_1"};const R={name:"Input",props:["modelValue"],emits:["update:modelValue"],computed:{value:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}}};(R.__cssModules={}).$style=T,R.render=function(e,n,r,l,o,i){return u((t(),a("input",s(e.$attrs,{type:e.$attrs.type,"onUpdate:modelValue":n[1]||(n[1]=e=>i.value=e),class:e.$style.input}),null,16,["type"])),[[c,i.value]])};var q={wrapper:"_wrapper_9oj7u_1",label:"_label_9oj7u_7",labelWrapper:"_label-wrapper_9oj7u_13",button:"_button_9oj7u_17",inputWrapper:"_input-wrapper_9oj7u_22"};const N={name:"AddPoint",components:{Button:I,Input:R},data:()=>({newPoint:""}),methods:{handleSubmit(){var e;(null==(e=this.newPoint)?void 0:e.length)>0&&(this.$emit("add-point",this.newPoint),this.newPoint="",this.$refs.input.$el.focus())}}},z=r("span",null,"Добавить новый пункт колеса:",-1),H=d("Добавить");(N.__cssModules={}).$style=q,N.render=function(e,n,s,d,u,c){const p=l("Input"),m=l("Button");return t(),a("form",{class:e.$style.wrapper,onSubmit:n[2]||(n[2]=o(((...e)=>c.handleSubmit&&c.handleSubmit(...e)),["prevent"]))},[r("div",{class:e.$style.labelWrapper},[r("label",{class:e.$style.label,for:"addPoint"},[z],2),r("div",{class:e.$style.inputWrapper},[r(p,{id:"addPoint",name:"addPoint",modelValue:u.newPoint,"onUpdate:modelValue":n[1]||(n[1]=e=>u.newPoint=e),modelModifiers:{trim:!0},autocomplete:"off",ref:"input"},null,8,["modelValue"])],2)],2),r("div",{class:e.$style.button},[r(m,null,{default:i((()=>[H])),_:1})],2)],34)};const J={name:"BackgroundImage"},G=r("div",null," BackgroundImage ",-1),K=r("div",null," Coming soon (c) ",-1);(J.__cssModules={}).$style={},J.render=function(e,n,s,r,l,o){return t(),a(p,null,[G,K],64)};var Q={label:"_label_5ifuj_1",input:"_input_5ifuj_5",primary:"_primary_5ifuj_9",secondary:"_secondary_5ifuj_19",button:"_button_5ifuj_30"};const X={name:"InputFile",props:{appearance:{type:String,default:"primary",validator:e=>-1!==["primary","secondary"].indexOf(e)}},methods:{uploadFile(e){this.$emit("upload",e)}}};(X.__cssModules={}).$style=Q,X.render=function(e,l,o,i,d,u){return t(),a("label",{class:e.$style.label},[r("input",s(e.$attrs,{class:e.$style.input,type:"file",onChange:l[1]||(l[1]=(...e)=>u.uploadFile&&u.uploadFile(...e))}),null,16),r("div",{class:[e.$style.button,e.$style[e.$props.appearance]]},[n(e.$slots,"default")],2)],2)};var Y={wrapper:"_wrapper_3wi47_1",importWrapper:"_import-wrapper_3wi47_7",exportWrapper:"_export-wrapper_3wi47_14"};const Z={name:"DataTransfer",components:{Button:I,InputFile:X},methods:{importData(e){this.$emit("import-data",e)},exportData(){this.$emit("export-data")}}},ee=r("div",null,[r("span",null,"Импортировать список")],-1),te=d("Импорт..."),ae=r("div",null,[r("span",null,"Экспортировать список")],-1),ne=d("Экспорт");(Z.__cssModules={}).$style=Y,Z.render=function(e,n,s,o,d,u){const c=l("InputFile"),p=l("Button");return t(),a("div",{class:e.$style.wrapper},[r("div",{class:e.$style.importWrapper},[ee,r("div",null,[r(c,{accept:"application/json",onUpload:u.importData},{default:i((()=>[te])),_:1},8,["onUpload"])])],2),r("div",{class:e.$style.exportWrapper},[ae,r("div",null,[r(p,{appearance:"secondary",onClick:u.exportData},{default:i((()=>[ne])),_:1},8,["onClick"])])],2)],2)};var se={wrapper:"_wrapper_1n1v7_1"};const re={name:"Point"};(re.__cssModules={}).$style=se,re.render=function(e,s,r,l,o,i){return t(),a("div",{class:e.$style.wrapper},[n(e.$slots,"default")],2)};const le={name:"simplebar-vue",data:()=>({instance:null}),mounted(){const e=v.getOptions(this.$attrs);this.instance=new v(this.$refs.element,e)},beforeUnmount(){var e;null==(e=this.instance)||e.unMount()},computed:{scrollElement(){return this.$refs.scrollElement},contentElement(){return this.$refs.contentElement}}},oe=h("data-v-62758100");m("data-v-62758100");const ie={class:"simplebar-wrapper"},de=r("div",{class:"simplebar-height-auto-observer-wrapper"},[r("div",{class:"simplebar-height-auto-observer"})],-1),ue={class:"simplebar-mask"},ce={class:"simplebar-offset"},pe={class:"simplebar-content-wrapper",ref:"scrollElement"},me={class:"simplebar-content",ref:"contentElement"},_e=r("div",{class:"simplebar-placeholder"},null,-1),ve=r("div",{class:"simplebar-track simplebar-horizontal"},[r("div",{class:"simplebar-scrollbar"})],-1),he=r("div",{class:"simplebar-track simplebar-vertical"},[r("div",{class:"simplebar-scrollbar"})],-1);_();const fe=oe(((e,l,o,i,d,u)=>(t(),a("div",s({ref:"element"},e.$attrs,{class:"wrapper"}),[r("div",ie,[de,r("div",ue,[r("div",ce,[r("div",pe,[r("div",me,[n(e.$slots,"default")],512)],512)])]),_e]),ve,he],16))));le.render=fe,le.__scopeId="data-v-62758100";const ye={name:"Trash"},$e=r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"},null,-1);ye.render=function(e,n,r,l,o,i){return t(),a("svg",s({fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e.$attrs),[$e],16)};var we={wrapper:"_wrapper_shc8e_1",inner:"_inner_shc8e_8",listItem:"_list-item_shc8e_12",iconWrapper:"_icon-wrapper_shc8e_21",button:"_button_shc8e_25",icon:"_icon_shc8e_21"};const be={name:"PointsList",components:{Trash:ye,Button:I,Point:re,Simplebar:le},props:{list:{type:Array,required:!0}},methods:{removePoint(e){this.$emit("remove-point",e)}}};(be.__cssModules={}).$style=we,be.render=function(e,n,s,o,u,c){const m=l("Point"),_=l("Trash"),v=l("Button"),h=l("Simplebar");return t(),a("div",{class:e.$style.wrapper},[r(h,null,{default:i((()=>[r("div",{class:e.$style.inner},[(t(!0),a(p,null,f(s.list,(n=>(t(),a("div",{class:e.$style.listItem},[r(m,null,{default:i((()=>[d(y(n.value),1)])),_:2},1024),r("div",{class:e.$style.iconWrapper},[r(v,{appearance:"danger",view:"squared",class:e.$style.button,ref:"button",onClick:e=>c.removePoint(n.id)},{default:i((()=>[r("div",{class:e.$style.icon},[r(_)],2)])),_:2},1032,["class","onClick"])],2)],2)))),256))],2)])),_:1})],2)};var ge={wrapper:"_wrapper_12rpg_1",label:"_label_12rpg_6"};const ke={name:"SearchPoints",components:{Input:R},methods:{handleInput(e){const{value:t}=e.target;this.$emit("search",t)}}};(ke.__cssModules={}).$style=ge,ke.render=function(e,n,s,o,i,d){const u=l("Input");return t(),a("label",{class:e.$style.wrapper},[r("div",{class:e.$style.label},"Поиск по списку",2),r(u,{onInput:d.handleInput},null,8,["onInput"])],2)};var Me={addPoint:"_add-point_p01fr_1",searchPoints:"_search-points_p01fr_5",pointsList:"_points-list_p01fr_9",dataTransfer:"_data-transfer_p01fr_13"};const Se={name:"Settings",components:{AddPoint:N,BackgroundImage:J,DataTransfer:Z,PointsList:be,SearchPoints:ke},inject:["wheelStore"],data:()=>({searchValue:""}),computed:{resultList(){return this.searchValue.length>0?this.wheelStore.state.value.variants.filter((e=>e.value.includes(this.searchValue))):this.wheelStore.state.value.variants}},methods:{addPoint(e){this.wheelStore.addVariant(e)},removePoint(e){this.wheelStore.removeVariant(e)},handleSearch(e){this.searchValue=e},importData(e){const{files:t}=e.target,a=t[0];if(!a)return;if("application/json"!==a.type)return alert("Импортируемый файл должен быть с расширением .json");const n=new FileReader;n.readAsText(a),n.onload=()=>{let e;try{e=JSON.parse(n.result)}catch(a){return alert("Не удалось импортировать схему: данные повреждены.")}const t=(e=>{if(!e||"object"!=typeof e)return{isValid:!1,reason:"Некорректные входные данные"};if("v1"!==e.version)return{isValid:!1,reason:"Версия схемы не поддерживается"};if(Array.isArray(e.data))return e.data.every((e=>Boolean(e.value)))?{isValid:!0}:{isValid:!1,reason:"Сохранённый список повреждён"};return{isValid:!1,reason:"Произошла непредвиденная ошибка. Не удалось импортировать схему"}})(e);t.isValid||alert(t.reason),confirm("Внимание! В результате импорта ВСЕ текущие данные будут перезаписаны. Вы согласны?")&&(this.wheelStore.setNewVariants(e.data),alert("Данные успешно импортированы!"))},n.onerror=()=>{alert(`Не удалось считать файл по следующей причине: ${n.error}`)}},exportData(){const e=this.wheelStore.state.value.variants,t=(a=e,{version:"v1",saveDate:(new Date).toUTCString(),saveDateTimezone:"UTC",data:a});var a;const n=new Blob([JSON.stringify(t)],{type:"application/json"}),s=document.createElement("a");s.download="config-schema.json",s.href=URL.createObjectURL(n),s.click()}}};(Se.__cssModules={}).$style=Me,Se.render=function(e,n,s,o,i,d){const u=l("AddPoint"),c=l("SearchPoints"),m=l("PointsList"),_=l("DataTransfer"),v=l("BackgroundImage");return t(),a(p,null,[r("div",{class:e.$style.addPoint},[r(u,{onAddPoint:d.addPoint},null,8,["onAddPoint"])],2),r("div",{class:e.$style.searchPoints},[r(c,{onSearch:d.handleSearch},null,8,["onSearch"])],2),r("div",{class:e.$style.pointsList},[r(m,{list:d.resultList,onRemovePoint:d.removePoint},null,8,["list","onRemovePoint"])],2),r("div",{class:e.$style.dataTransfer},[r(_,{onImportData:d.importData,onExportData:d.exportData},null,8,["onImportData","onExportData"])],2),r("div",{class:e.$style.backgroundImage},[r(v)],2)],64)};const Ie={name:"ButtonField",components:{Button:I},props:{rouletteList:{type:Array,required:!0}}},Pe=d(" Запустить рулетку! ");(Ie.__cssModules={}).$style={},Ie.render=function(e,n,s,o,d,u){const c=l("Button");return t(),a("div",null,[r(c,{onClick:n[1]||(n[1]=t=>e.$emit("activate-wheel")),disabled:0===s.rouletteList.length},{default:i((()=>[Pe])),_:1},8,["disabled"])])};var xe={wrapper:"_wrapper_gt07c_1",wheelWrapper:"_wheel-wrapper_gt07c_9",point:"_point_gt07c_17"};const Le={name:"Wheel",components:{Point:re,ButtonField:Ie},inject:["wheelStore"],data:()=>({isWheelActive:!1,currentIndex:0}),computed:{rouletteList(){const e=this.currentIndex,t=this.wheelStore.state.value.variants;if(t.length>0){const a=[];for(let n=0;n<5;n++){const s=t[(e+n)%t.length];a.push(s)}return a}return[]}},methods:{activateWheel(){const e=this.wheelStore.state.value.variants,t=e.length;this.currentIndex=this.randomInteger(0,e.length-1);const a=setInterval((()=>{if(this.currentIndex<t)this.currentIndex+=1;else{if(this.currentIndex!==t)throw new Error("Array is out of bounds");this.currentIndex=0}}),200);setTimeout((()=>{clearInterval(a)}),5e3)},randomInteger(e,t){const a=e+Math.random()*(t+1-e);return Math.floor(a)}}},je={key:1};(Le.__cssModules={}).$style=xe,Le.render=function(e,n,s,o,u,c){const m=l("Point"),_=l("ButtonField");return t(),a("div",{class:e.$style.wrapper},[r("div",{class:e.$style.wheelWrapper},[c.rouletteList.length>0?(t(!0),a(p,{key:0},f(c.rouletteList,(n=>(t(),a("div",{class:e.$style.point},[r(m,null,{default:i((()=>[d(y(n.value),1)])),_:2},1024)],2)))),256)):(t(),a("div",je," Список пуст "))],2),r(_,{onActivateWheel:c.activateWheel,"roulette-list":c.rouletteList},null,8,["onActivateWheel","roulette-list"])],2)};const Be="roulette-data",Ve=()=>{return E((e=Be,localStorage.getItem(e)),Be);var e},We=$({variants:Ve()});w([We.value],(()=>{var e,t;e=Be,t=JSON.stringify(We.value.variants),localStorage.setItem(e,t)}));var Ce={app:"_app_p14z1_1",main:"_main_p14z1_7"};const De={name:"App",components:{Wheel:Le,Modal:V,Footer:F,Header:C,Button:I,Settings:Se},data:()=>({isModalOpen:!1}),provide:{wheelStore:{state:b(We),addVariant:e=>{const t={id:"_"+Date.now().toString(36).substr(2,9),value:e};We.value.variants.unshift(t)},regenerateStore:()=>{We.value={variants:Ve()}},setNewVariants:e=>{We.value.variants=e},removeVariant:e=>{const t=We.value.variants.findIndex((t=>t.id===e));We.value.variants.splice(t,1)}}}};(De.__cssModules={}).$style=Ce,De.render=function(e,n,s,o,d,u){const c=l("Header"),p=l("Wheel"),m=l("Footer"),_=l("Settings"),v=l("Modal");return t(),a("div",{class:e.$style.app},[r(c,{onOpenModal:n[1]||(n[1]=e=>d.isModalOpen=!0)}),r("div",{class:e.$style.main},[r(p)],2),r(m),(t(),a(g,{to:"body"},[d.isModalOpen?(t(),a(v,{key:0,onCloseModal:n[2]||(n[2]=e=>d.isModalOpen=!1)},{default:i((()=>[r(_)])),_:1})):k("",!0)]))],2)};M(De).mount("#app");
